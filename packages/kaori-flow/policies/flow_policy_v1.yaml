# Kaori Flow Policy v1.0.0
#
# Configuration for trust dynamics (FLOW_SPEC v4.0).
# This policy is itself an Agent with standing.
# All tunable parameters live here — nothing is hardcoded in the spec.

# --- Agent Identity ---
agent_id: "policy:flow_v1.0.0"
agent_type: policy
version: "1.0.0"

# --- Metadata ---
metadata:
  description: "Default Kaori Flow policy implementing the 7 Rules of Trust"
  maintainer: "msro:flow_team"
  created_at: "2026-01-09T00:00:00Z"

# --- Rule 5: Standing Gain (Diminishing Returns) ---
# Formula: ΔS = coefficient * log(1 + quality_score)
standing_gain:
  coefficient: 5.0

# --- Rule 5: Saturation Curve (Logistic) ---
# Formula: E(S) = max_standing / (1 + e^(-steepness*(S - midpoint)))
saturation:
  steepness: 0.01
  midpoint: 500.0
  max_standing: 1000.0

# --- Rule 5: Penalty (Sharper Than Reward) ---
# Formula: ΔS = -coefficient * log(1 + quality_score) * amplifier
penalty:
  coefficient: 5.0
  amplifier: 2.0  # λ > 1 makes penalty sharper than reward

# --- Rule 3: Standing Bounds ---
bounds:
  min: 0.0
  max: 1000.0
  initial_by_role:
    observer: 200.0
    validator: 250.0
    expert: 350.0
    authority: 500.0
    policy: 500.0

# --- Rule 4: Network Context Modifiers ---
# These affect how standing converts to effective trust.
# All modifiers are derived from signals, not stored.
network_modifiers:
  
  # Bonus when claimtype collaborators vouch for observer
  claimtype_collaborator_vouch:
    enabled: true
    max_bonus_fraction: 0.15     # Cap at 15% of base effective
    per_vouch_fraction: 0.05     # 5% per collaborator vouch
    edge_weight_decay_per_day: 0.01
  
  # Penalty when observer created the probe they're observing
  self_dealing:
    enabled: true
    discount_factor: 0.5         # 50% discount for self-dealing
  
  # Bonus when high-standing agent created the probe
  probe_creator_bonus:
    enabled: true
    min_creator_standing: 500.0  # Only if creator > 500
    bonus_fraction: 0.05         # 5% bonus for all observers

# --- ClaimType Standing Threshold ---
# Low claimtype standing → higher observer threshold
claimtype_threshold:
  enabled: true
  base_threshold: 100.0          # Base required observer standing
  scale_factor: 2.0              # threshold = base * (1 + scale * (1 - ct_standing/1000))

# --- Rule 6: Phase Transitions ---
# Three phases: dormant, active, dominant
phase_transitions:
  dormant_threshold: 300.0       # Below = dormant phase
  dominant_threshold: 700.0      # Above = dominant phase
  dormant_weight_multiplier: 0.1 # Weight when dormant

# --- Edge Weight Computation ---
# Weights are emergent from signals; these control interpretation
edge_weights:
  vouch:
    base_weight: 1.0
    decay_rate_per_day: 0.01
  collaborate:
    scaling_divisor: 5.0         # weight = min(1.0, log(1+count)/divisor)
  conflict:
    base_weight: -0.5            # Negative weight for conflicts
